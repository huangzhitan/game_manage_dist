"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[589],{4351:function(e,t,l){l.d(t,{Z:function(){return c}});var a=function(){var e=this,t=e._self._c;return t("div",[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total,  prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},s=[],r={props:{total:{type:Number,default:100},pageSize:{type:Number,default:10}},methods:{handleSizeChange(e){console.log(`每页 ${e} 条`)},handleCurrentChange(e){console.log(`当前页: ${e}`),this.$emit("CurrentChange",e)}},data(){return{currentPage:1}}},n=r,i=l(1001),o=(0,i.Z)(n,a,s,!1,null,null,null),c=o.exports},6589:function(e,t,l){l.r(t),l.d(t,{default:function(){return C}});var a=function(){var e=this,t=e._self._c;return t("div",[t("Breadcrumb"),t("div",{staticClass:"header"},[t("div",{staticClass:"form"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[t("el-form-item",{attrs:{label:"预定编号"}},[t("el-input",{attrs:{size:"small",placeholder:"预定编号"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),t("el-form-item",{attrs:{label:"预定时间"}},[t("el-date-picker",{attrs:{size:"small",type:"date",placeholder:"选择日期"},model:{value:e.formInline.date,callback:function(t){e.$set(e.formInline,"date",t)},expression:"formInline.date"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"small"}},[e._v("查询")])],1)],1)],1),t("div",{staticClass:"group"},[t("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.orderCollect}},[e._v("订单汇总")]),t("download-excel",{staticClass:"export-excel-wrapper",attrs:{data:e.DetailsForm,fields:e.json_fields,header:e.title,name:"xxx公司订单列表.xls"}},[t("el-button",{attrs:{size:"small",type:"warning"}},[e._v("导出")])],1)],1)]),t("div",{staticClass:"content"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","header-cell-class-name":"active-header","cell-class-name":"table-center"},on:{select:e.select}},[t("el-table-column",{attrs:{type:"selection",width:"55",selectable:e.selectable}}),t("el-table-column",{attrs:{prop:"code",label:"订单编号"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("span",{staticStyle:{color:"blue",cursor:"pointer"},on:{click:function(t){return e.OrderDecs(l.row)}}},[e._v(e._s(l.row.code))])]}}])}),t("el-table-column",{attrs:{prop:"ordername",label:"下单人"}}),t("el-table-column",{attrs:{prop:"company",label:"所属单位"}}),t("el-table-column",{attrs:{prop:"phone",label:"联系电话"}}),t("el-table-column",{attrs:{prop:"yudingTime",label:"预定时间"}}),t("el-table-column",{attrs:{prop:"price",label:"订单总价格"}}),t("el-table-column",{attrs:{prop:"huizongStatus",label:"汇总状态"}})],1),t("Pagination",{attrs:{total:e.total,pageSize:e.pageSize},on:{CurrentChange:e.CurrentChange}})],1),t("OrderDecs",{ref:"child"})],1)},s=[],r=(l(7658),l(5743)),n=l.n(r),i=l(4351),o=function(){var e=this,t=e._self._c;return t("el-drawer",{attrs:{title:"订单详情",visible:e.drawer,size:e.size,modal:!1,"before-close":e.beforeClose}},[t("div",{staticClass:"orderdesc"},[t("div",{staticClass:"header"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:18}},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"mini"}},[t("el-form-item",{attrs:{label:"订单编号","label-width":"100px"}},[t("el-input",{attrs:{placeholder:"输入品牌名称"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}})],1),t("el-form-item",{attrs:{label:"预定时间","label-width":"100px"}},[t("el-col",{attrs:{span:11}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.formInline.date1,callback:function(t){e.$set(e.formInline,"date1",t)},expression:"formInline.date1"}})],1),t("el-col",{staticClass:"line",attrs:{span:2}},[e._v("至")]),t("el-col",{attrs:{span:11}},[t("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择时间"},model:{value:e.formInline.date2,callback:function(t){e.$set(e.formInline,"date2",t)},expression:"formInline.date2"}})],1)],1),t("el-form-item",{attrs:{label:"下单人","label-width":"100px"}},[t("el-input",{attrs:{placeholder:"输入"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}})],1),t("el-form-item",{attrs:{label:"所属单位","label-width":"100px"}},[t("el-input",{attrs:{placeholder:"输入"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}})],1),t("el-form-item",{attrs:{label:"汇总状态","label-width":"100px"}},[t("el-select",{attrs:{placeholder:"全部"},model:{value:e.formInline.region,callback:function(t){e.$set(e.formInline,"region",t)},expression:"formInline.region"}},[t("el-option",{attrs:{label:"全部",value:"shanghai"}}),t("el-option",{attrs:{label:"未汇总",value:"shanghai"}}),t("el-option",{attrs:{label:"已汇总",value:"beijing"}})],1)],1)],1)],1),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{type:"primary"}},[e._v("查询")])],1)],1)],1),t("div",{staticClass:"list-content"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","header-cell-style":{background:"#fafafa",color:"#333",textAlgin:"center"}}},[t("el-table-column",{attrs:{prop:"title",label:"产品名称"}}),t("el-table-column",{attrs:{prop:"price",label:"价格"}}),t("el-table-column",{attrs:{prop:"guige",label:"规格"}}),t("el-table-column",{attrs:{prop:"num",label:"数量"}}),t("el-table-column",{attrs:{prop:"sum",label:"小计（元）"}})],1)],1)])])},c=[],d=l(3822),u={data(){return{formInline:{},tableData:[],direction:"",size:"90%",drawer:!1,menu:200,width:""}},computed:{...(0,d.rn)(["isCollapse"])},methods:{beforeClose(){this.drawer=!1}},created(){this.$api.getDetail().then((e=>{console.log("-----详情信息---------",e.data),this.tableData=e.data.result.list}))},mounted(){let e=document.documentElement.clientWidth;this.size=e-this.menu-10+"px",this.width=e},watch:{isCollapse(e){this.menu=e?64:200,this.size=this.width-this.menu-10+"px"}}},m=u,p=l(1001),h=(0,p.Z)(m,o,c,!1,null,"ee302f76",null),f=h.exports,b={components:{Pagination:i.Z,OrderDecs:f},data(){return{formInline:{},tableData:[],total:10,pageSize:1,ids:[],DetailsForm:[],json_fields:{"订单编号":{field:"code",callback:e=>"&nbsp;"+e},"下单人":"ordername","所属单位":"company","联系电话":"phone","预定时间":"yudingTime","订单总价格":"price","汇总状态":"huizongStatus"},title:"xxx公司采购系统订单列表"}},methods:{dayjs:n(),OrderDecs(){this.$refs.child.drawer=!0},orderCollect(){this.ids.length>=2?(console.log("this.ids---",this.ids),this.$api.changeStatus({ids:this.ids.join(",")}).then((e=>{console.log("汇总了----",e.data),200===e.data.status&&(this.$message({type:"success",message:"汇总成功!"}),this.orderList(1))}))):this.$alert("汇总订单至少需要2条订单信息","汇总订单",{confirmButtonText:"确定",callback:e=>{this.$message({type:"info",message:"取消汇总"})}})},select(e,t){console.log(e,t);let l=[];e.forEach((e=>{l.push(e.id)})),this.ids=l,this.DetailsForm=e},CurrentChange(e){this.orderList(e)},selectable(e,t){return"未汇总"==e.huizongStatus},async orderList(e){let t=await this.$api.orderList({page:e});if(console.log("订单列表---",t.data),200==t.data.status){let e=t.data.data;e.forEach((e=>{e.huizongStatus=1==e.huizongStatus?"未汇总":"已汇总",e.yudingTime=n()(e.yudingTime).format("YYYY-MM-DD")})),this.tableData=e,console.log("数据tableData",this.tableData),this.total=t.data.total,this.pageSize=t.data.pageSize}else this.tableData=[],this.total=1,this.pageSize=1}},created(){this.orderList(1)}},g=b,v=(0,p.Z)(g,a,s,!1,null,"ba3b6e58",null),C=v.exports}}]);
//# sourceMappingURL=589.84532ebb.js.map