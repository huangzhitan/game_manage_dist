"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[300],{9300:function(t,e,a){a.r(e),a.d(e,{default:function(){return B}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"advert"},[e("AdvertTree",{staticClass:"advert-left",on:{getTreeData:t.getTreeData}}),e("AdvertContent",{staticClass:"advert-content",attrs:{treeData:t.treeData}})],1)},l=[],i=function(){var t=this,e=t._self._c;return e("div",[e("el-tree",{attrs:{data:t.data,"expand-on-click-node":!1,"render-content":t.renderContent,props:t.props,lazy:"",load:t.loadNode,"node-key":"pid"},on:{"node-click":t.handleNodeClick}}),e("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("p",[t._v("当前出于的广告位置："+t._s(t.advertInfo.name))]),e("el-input",{attrs:{type:"text"},model:{value:t.advertName,callback:function(e){t.advertName=e},expression:"advertName"}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submitAdvert}},[t._v("确 定")])],1)],1)],1)},o=[],s=a(4471);const r="/api/advert/content/selectContentCategoryByParentId",d="/api/advert/content/insertContentCategory",c="/api/advert/content/updateContentCategory",u="/api/advert/content/deleteContentCategoryById",p="/api/advert/content/insertTbContent",m="/api/advert/content/selectTbContentAllByCategoryId";function h(t){return s.Z.get(r,{params:t})}function f(t){return s.Z.get(d,{params:t})}function v(t){return s.Z.get(c,{params:t})}function b(t){return s.Z.get(u,{params:t})}function g(t){return s.Z.get(p,{params:t})}function C(t){return s.Z.get(m,{params:t})}var y={data(){return{dialogVisible:!1,title:"添加广告",advertName:"",advertInfo:{},props:{label:"name",children:"zones",isLeaf:"leaf"},data:[]}},methods:{http(){h().then((t=>{console.log("http----进入组件懒加载数据"),this.data=t.data.result}))},handleNodeClick(t){console.log(t),this.$emit("getTreeData",t)},loadNode(t,e){0===t.level&&h().then((t=>e(t.data.result))),t.level>=1&&h({id:t.data.pid}).then((t=>200===t.data.status?e(t.data.result):e([])))},append(t){console.log(t),this.dialogVisible=!0,this.title="添加广告",this.advertInfo=t},remove(t,e){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.delete(e.pid)})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},delete(t){b({pid:t}).then((t=>{200===t.data.status&&(this.$message({message:"恭喜你，删除成功",type:"success"}),this.http())}))},update(t){this.dialogVisible=!0,this.title="修改广告名称",this.advertInfo=t},submitAdvert(){"添加广告"==this.title?(console.log("添加事件"),f({pid:this.advertInfo.pid,name:this.advertName}).then((t=>{console.log(t.data),200===t.data.status&&(this.$message({message:"恭喜你，这是一条成功消息",type:"success"}),this.dialogVisible=!1,this.advertName="",this.http())}))):(console.log("修改事件"),v({pid:this.advertInfo.pid,name:this.advertName}).then((t=>{200===t.data.status&&(this.$message({message:"恭喜你，修改成功",type:"success"}),this.dialogVisible=!1,this.advertName="",this.http())})))},renderContent(t,{node:e,data:a,store:n}){return t("span",{class:"custom-tree-node"},[t("span",[e.label]),t("span",[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:()=>this.append(a,"add")}},["增加"]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:()=>this.update(a,"update")}},["修改"]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:()=>this.remove(e,a)}},["删除"])])])}}},k=y,I=a(1001),D=(0,I.Z)(k,i,o,!1,null,null,null),_=D.exports,w=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("el-button",{on:{click:function(e){t.dialogVisible=!0}}},[t._v(t._s(t.treeData.name)+"广告")]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[e("el-table-column",{attrs:{prop:"pid",label:"PID",width:"180"}}),e("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}}),e("el-table-column",{attrs:{prop:"url",label:"访问地址","min-width":"240","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"image",label:"图片地址","min-width":"240","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(a.$index,a.row)}}},[t._v("删除")])]}}])})],1),e("el-dialog",{attrs:{title:"新增广告内容",visible:t.dialogVisible,width:"30%"}},[e("el-form",{staticClass:"demo-form-inline",attrs:{model:t.formInline,size:"small"}},[e("el-form-item",{attrs:{label:"广告名称"}},[e("el-input",{attrs:{placeholder:"审批人"},model:{value:t.formInline.name,callback:function(e){t.$set(t.formInline,"name",e)},expression:"formInline.name"}})],1),e("el-form-item",{attrs:{label:"广告图片地址"}},[e("el-input",{attrs:{placeholder:"审批人"},model:{value:t.formInline.url,callback:function(e){t.$set(t.formInline,"url",e)},expression:"formInline.url"}})],1),e("el-form-item",{attrs:{label:"图片"}},[e("el-input",{attrs:{placeholder:"审批人"},model:{value:t.formInline.image,callback:function(e){t.$set(t.formInline,"image",e)},expression:"formInline.image"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addContent}},[t._v("确 定")])],1)],1)],1)},x=[],N={props:{treeData:{type:Object,default:function(){return{name:"按钮"}}}},data(){return{tableData:[],dialogVisible:!1,formInline:{image:"",url:"",name:""}}},watch:{treeData:function(t){this.tableData=[],C({pid:t.pid}).then((e=>{console.log("监听修改----------------",t,e.data),200===e.status?this.tableData=e.data.result:this.tableData=[]}))}},methods:{handleDelete(){},addContent(){let{image:t,url:e,name:a}=this.formInline;g({image:t,url:e,name:a}).then((t=>{console.log(t.data)}))}}},V=N,T=(0,I.Z)(V,w,x,!1,null,"0594e87d",null),$=T.exports,Z={components:{AdvertTree:_,AdvertContent:$},data(){return{treeData:{name:"按钮"}}},methods:{getTreeData(t){console.log("----",t),this.treeData=t}}},z=Z,A=(0,I.Z)(z,n,l,!1,null,"1181a435",null),B=A.exports}}]);
//# sourceMappingURL=300.077bd563.js.map