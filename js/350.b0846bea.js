"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[350],{9350:function(t,e,i){i.r(e),i.d(e,{default:function(){return m}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"category"},[e("Breadcrumb"),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"title"},[t._v("产品类目管理")]),e("div",{staticClass:"tree"},[e("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"warning"},on:{click:t.addCategory}},[t._v("新增一级导航类目")]),e("el-tree",{attrs:{data:t.data,"show-checkbox":"","node-key":"id","default-expand-all":"","expand-on-click-node":!1,"render-content":t.renderContent,props:t.defaultProps}})],1)]),e("Dialog",{ref:"child",attrs:{info:t.info,type:t.type},on:{updateViews:t.itemCategory}})],1)},a=[],n=(i(7658),function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.info.title,visible:t.dialogVisible,width:"30%","before-close":t.handleClose}},[e("strong",[t._v("请输入类目名称：")]),e("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submitHandle}},[t._v("确 定")])],1)],1)}),o=[],l={props:["info","type"],data(){return{dialogVisible:!1,input:""}},methods:{handleClose(t){this.dialogVisible=!1},submitHandle(){1==this.type?(console.log("新增",this.input),this.insertItemCategory({cid:this.info.cid,name:this.input})):2==this.type?(console.log("修改",this.input),this.updateCategory({id:this.info.id,name:this.input})):(console.log("一级新增",this.input),this.insertCategory({name:this.input}))},async insertCategory(t){let e=await this.$api.insertCategory(t);console.log("一级新增----",e.data),200==e.data.status&&(this.$message({message:"恭喜你，新增成功",type:"success"}),this.dialogVisible=!1,this.$emit("updateViews"))},async updateCategory(t){let e=await this.$api.updateCategory(t);console.log("修改----",e.data),200==e.data.status&&(this.$message({message:"恭喜你，修改成功",type:"success"}),this.dialogVisible=!1,this.$emit("updateViews"))},async insertItemCategory(t){let e=await this.$api.insertItemCategory(t);console.log("新增----",e.data),200==e.data.status&&(this.$message({message:"恭喜你，新增成功",type:"success"}),this.dialogVisible=!1,this.$emit("updateViews"))}}},c=l,r=i(1001),d=(0,r.Z)(c,n,o,!1,null,null,null),p=d.exports,h={components:{Dialog:p},data(){return{info:"标题",type:1,data:[{id:1,name:"一级 1",children:[{id:4,name:"二级 1-1"}]},{id:2,name:"一级 2"}],defaultProps:{label:"name"}}},created(){this.itemCategory()},methods:{addCategory(){this.$refs.child.dialogVisible=!0,this.info={title:"新增一级分类"},this.type=3,this.$refs.child.input=""},append(t){console.log("新增-------------",t),this.$refs.child.dialogVisible=!0,this.info={title:`新增【${t.name}】子级分类`,cid:t.cid},this.type=1,this.$refs.child.input=""},remove(t,e){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$api.deleteContentCategoryById({id:e.id}).then((t=>{console.log("-删除---",t.data),200==t.data.status&&(this.$message({message:"恭喜你，删除成功",type:"success"}),this.itemCategory())}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},update(t,e){console.log("修改--------------"),this.$refs.child.dialogVisible=!0,this.info={title:`修改【${e.name}】名称`,id:e.id},this.type=2,this.$refs.child.input=e.name},renderContent(t,{node:e,data:i,store:s}){return t("span",{class:"custom-tree-node"},[t("span",{class:"name"},[e.label]),1==e.level?t("span",[t("el-button",{class:"mini",on:{click:()=>this.append(i)},attrs:{icon:"el-icon-plus"}},["新增"]),t("el-button",{class:"mini",on:{click:()=>this.update(e,i)},attrs:{icon:"el-icon-edit"}},["修改"]),t("el-button",{class:"mini",attrs:{type:"danger",icon:"el-icon-delete"},on:{click:()=>this.remove(e,i)}},["删除"])]):t("span",[t("el-button",{class:"mini",on:{click:()=>this.update(e,i)},attrs:{icon:"el-icon-edit"}},["修改"]),t("el-button",{class:"mini",attrs:{type:"danger",icon:"el-icon-delete"},on:{click:()=>this.remove(e,i)}},["删除"])])])},async itemCategory(){let t=await this.$api.itemCategory();console.log("res--data",t.data.result);let e=t.data.result,i=[],s=[];e.forEach((t=>{1==t.type?(t.children=[],i.push(t)):s.push(t)})),console.log(i,s),i.forEach((t=>{s.forEach((e=>{e.type===t.cid&&t.children.push(e)}))})),this.data=i}}},u=h,g=(0,r.Z)(u,s,a,!1,null,"ca1e8e1e",null),m=g.exports}}]);
//# sourceMappingURL=350.b0846bea.js.map